version: 1.0
runtime: nodejs22
build:
  commands:
    pre-build:
      - yarn install --frozen-lockfile
    build:
      - yarn build
  env:
    - name: NEXT_PUBLIC_SUPABASE_URL
      value: $NEXT_PUBLIC_SUPABASE_URL
    - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
      value: $NEXT_PUBLIC_SUPABASE_ANON_KEY
    - name: NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY
      value: $NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY
    - name: NEXT_PUBLIC_ANTHROPIC_KEY
      value: $NEXT_PUBLIC_ANTHROPIC_KEY
    - name: NEXT_PUBLIC_ANTHROPIC_MODEL
      value: $NEXT_PUBLIC_ANTHROPIC_MODEL
    - name: NEXT_PUBLIC_OPEN_AI_TOKEN
      value: $NEXT_PUBLIC_OPEN_AI_TOKEN
    - name: NEXT_PUBLIC_OPEN_AI_MODEL
      value: $NEXT_PUBLIC_OPEN_AI_MODEL
run:
  runtime-version: 22.14.0
  command: yarn start
  network:
    port: 3000
    env: APP_PORT
  env:
    - name: NEXT_PUBLIC_SUPABASE_URL
      value: $NEXT_PUBLIC_SUPABASE_URL
    - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
      value: $NEXT_PUBLIC_SUPABASE_ANON_KEY
    - name: NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY
      value: $NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY
    - name: NEXT_PUBLIC_ANTHROPIC_KEY
      value: $NEXT_PUBLIC_ANTHROPIC_KEY
    - name: NEXT_PUBLIC_ANTHROPIC_MODEL
      value: $NEXT_PUBLIC_ANTHROPIC_MODEL
    - name: NEXT_PUBLIC_OPEN_AI_TOKEN
      value: $NEXT_PUBLIC_OPEN_AI_TOKEN
    - name: NEXT_PUBLIC_OPEN_AI_MODEL
      value: $NEXT_PUBLIC_OPEN_AI_MODEL