scalar DateTime
scalar JSON

type Assistant {
	id: ID!
	name: String!
	sport: String!
	role: String!
	strengths: [String!]!
	bio: String!
	promptTemplate: String!
	createdAt: DateTime!
	updatedAt: DateTime!
	deletedAt: DateTime
}

type Client {
	userId: ID!
	id: ID!
	birthday: String
	gender: String
	fitnessLevel: String
	trainingHistory: String
	height: Float
	weight: Float
	firstName: String!
	lastName: String!
	email: String!
	tags: [String!]
	notes: String
	createdAt: DateTime!
	updatedAt: DateTime!
	deletedAt: DateTime
	goals: [Goal!]
	sessionLogs: [SessionLog!]
	trainingPlans: [TrainingPlan!]!
}

type Goal {
	id: ID!
	client: Client!
	title: String!
	description: String
	status: GoalStatus!
	createdAt: DateTime!
	updatedAt: DateTime!
	deletedAt: DateTime
	dueDate: DateTime
	progressNotes: String
	sessionLogs: [SessionLog!]!
}

enum GoalStatus {
	ACTIVE
	COMPLETED
	PAUSED
}

type SessionLog {
	id: ID!
	client: Client!
	date: DateTime!
	notes: String
	transcript: String
	summary: String
	actionItems: [String!]
	goals: [Goal!]!
	aiMetadata: AIMetadata
	createdAt: DateTime!
	updatedAt: DateTime!
	deletedAt: DateTime
}

type AIMetadata {
	summaryGenerated: Boolean!
	nextStepsGenerated: Boolean!
}

type TrainingPlan {
	id: ID!
	assistants: [Assistant!]
	goals: [Goal!]
	client: Client
	title: String!
	overview: String
	planJson: JSON!
	createdAt: DateTime!
	updatedAt: DateTime!
	deletedAt: DateTime
	generatedBy: String
	sourcePrompt: String
}

input AssistantsFilter {
	sport: String!
	role: String
	strengths: [String]
}

input AssistantsInput {
	filter: AssistantsFilter
}

type Query {
	assistants(input: AssistantsInput): [Assistant]!
	clients: [Client!]!
	client(id: ID!): Client
	goals(clientId: ID!): [Goal!]!
	goal(id: ID!, clientId: ID!): Goal
	sessionLogs(clientId: ID!): [SessionLog!]!
	sessionLog(id: ID!): SessionLog
	trainingPlan(id: ID!): TrainingPlan
	trainingPlans(clientId: ID): [TrainingPlan!]!
}

input CreateClientInput {
	firstName: String!
	lastName: String!
	birthday: DateTime!
	email: String!
	tags: [String!]
	notes: String
}

input UpdateClientInput {
	firstName: String
	lastName: String
	email: String
	tags: [String!]
	notes: String
}

input CreateGoalInput {
	clientId: ID!
	title: String!
	description: String
	dueDate: DateTime
}

input UpdateGoalInput {
	title: String
	description: String
	dueDate: DateTime
	status: GoalStatus
	progressNotes: String
}

input CreateSessionLogInput {
	clientId: ID!
	date: DateTime!
	notes: String
	transcript: String
	goalIds: [ID!]
}

input UpdateSessionLogInput {
	notes: String
	transcript: String
	goalIds: [ID!]
	summary: String
	actionItems: [String!]
}

input AISummarizeSessionLogInput {
	sessionLogId: ID!
}

input CreateTrainingPlanInput {
	clientId: ID!
	assistantIds: [ID!]
	goalIds: [ID!]
}

input AIGenerateSessionInput {
	clientId: ID!
	goalIds: [ID!]!
	sessionLogIds: [ID!]!
}

input AIAnalyzeProgressInput {
	clientId: ID!
	startDate: DateTime!
	endDate: DateTime!
}

input UpdateTrainingPlanInput {
	title: String
	overview: String
	assistantIds: [ID!]
	goalIds: [ID!]
}

type Mutation {
	createClient(input: CreateClientInput!): Client!
	updateClient(id: ID!, input: UpdateClientInput!): Client!
	deleteClient(id: ID!): Boolean!

	createGoal(input: CreateGoalInput!): Goal!
	updateGoal(id: ID!, input: UpdateGoalInput!): Goal!
	deleteGoal(id: ID!): Boolean!

	createSessionLog(input: CreateSessionLogInput!): SessionLog!
	updateSessionLog(id: ID!, input: UpdateSessionLogInput!): SessionLog!
	deleteSessionLog(id: ID!): Boolean!

	createTrainingPlan(input: CreateTrainingPlanInput!): TrainingPlan!
	updateTrainingPlan(id: ID!, input: UpdateTrainingPlanInput!): TrainingPlan!

	summarizeSessionLog(input: AISummarizeSessionLogInput!): SessionLog!
	generateSession(input: AIGenerateSessionInput!): SessionLog!
	analyzeProgress(input: AIAnalyzeProgressInput!): String!
}

type Subscription {
	trainingPlanGenerated(clientId: ID!): TrainingPlan!
	sessionLogAdded(clientId: ID!): SessionLog!
	goalAdded(clientId: ID!): Goal!
	sessionLogUpdated(id: ID!): SessionLog!
	goalUpdated(id: ID!): Goal!
	clientUpdated(id: ID!): Client!
}
